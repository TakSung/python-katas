# TDD Cycle Guide with Agent Transitions

TDD(Test-Driven Development)ë¥¼ ì²˜ìŒ ë°°ìš°ëŠ” ë¶„ë“¤ì„ ìœ„í•œ ì‹¤ì „ ê°€ì´ë“œì…ë‹ˆë‹¤.

## TDDë€?

**í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ(TDD)**ì€ ë‹¤ìŒ 3ë‹¨ê³„ë¥¼ ë°˜ë³µí•˜ëŠ” ê°œë°œ ë°©ë²•ë¡ ì…ë‹ˆë‹¤:

```
RED â†’ GREEN â†’ REFACTOR â†’ (ë°˜ë³µ)
```

1. **RED**: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±
2. **GREEN**: í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œí‚¤ëŠ” ìµœì†Œí•œì˜ ì½”ë“œ ì‘ì„±
3. **REFACTOR**: ì½”ë“œë¥¼ ê°œì„ í•˜ê³  ì •ë¦¬

## TDD ì‚¬ì´í´ë³„ ì—ì´ì „íŠ¸ ì „í™˜

---

## Phase 1: RED - ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±

### Step 1: ì „ëµ ìˆ˜ë¦½ (Navigator)

**ëª©ì **: ë‹¤ìŒì— êµ¬í˜„í•  ê¸°ëŠ¥ì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

**ì—ì´ì „íŠ¸**: Navigator
**íŒŒì¼**: `agent/sub-agent/navigator.md`

**ì‚¬ìš© ëª…ë ¹ì–´**:
```
ë„¤ë¹„ê²Œì´í„°ê°€ ë˜ì–´ ë‹¤ìŒ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì œì•ˆí•´ì¤˜
```

**Navigatorê°€ í•˜ëŠ” ì¼**:
- êµ¬í˜„í•  ê¸°ëŠ¥ì˜ ìš°ì„ ìˆœìœ„ ì œì•ˆ
- ì—£ì§€ ì¼€ì´ìŠ¤(edge case) ì‹ë³„
- í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì œì•ˆ
- Git íˆìŠ¤í† ë¦¬ ë¶„ì„ìœ¼ë¡œ ë‹¤ìŒ ì‘ì—… ì¶”ì²œ

**ì˜ˆì‹œ ì‘ë‹µ**:
```
ì§€ê¸ˆê¹Œì§€ ê¸°ë³¸ ê²Œì„ ìƒì„± í…ŒìŠ¤íŠ¸ë¥¼ ì™„ë£Œí–ˆìœ¼ë‹ˆ,
ë‹¤ìŒì€ "ìˆ«ì ì¶”ì¸¡ ê¸°ëŠ¥"ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²Œ ì–´ë–¨ê¹Œìš”?

í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:
1. ì •ë‹µë³´ë‹¤ í° ìˆ«ìë¥¼ ì…ë ¥í–ˆì„ ë•Œ "Too High" ë°˜í™˜
2. ì •ë‹µë³´ë‹¤ ì‘ì€ ìˆ«ìë¥¼ ì…ë ¥í–ˆì„ ë•Œ "Too Low" ë°˜í™˜
3. ì •ë‹µì„ ë§ì·„ì„ ë•Œ "Correct" ë°˜í™˜

ì—£ì§€ ì¼€ì´ìŠ¤:
- ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ìˆ«ì ì…ë ¥ (ì˜ˆ: -1, 101)
- ì´ë¯¸ ê²Œì„ì´ ì¢…ë£Œëœ ìƒíƒœì—ì„œ ì¶”ì¸¡ ì‹œë„
```

---

### Step 2: í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± (Driver)

**ëª©ì **: Navigatorê°€ ì œì•ˆí•œ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.

**ì—ì´ì „íŠ¸**: Driver
**íŒŒì¼**: `agent/sub-agent/driver.md`

**ì‚¬ìš© ëª…ë ¹ì–´**:
```
ë“œë¼ì´ë²„ê°€ ë˜ì–´ ì´ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ì‘ì„±í•´ì¤˜
```

**Driverê°€ í•˜ëŠ” ì¼**:
- Given-When-Then êµ¬ì¡°ë¡œ í…ŒìŠ¤íŠ¸ ì‘ì„±
- pytest í˜•ì‹ìœ¼ë¡œ ì½”ë“œ êµ¬í˜„
- êµ¬í˜„ ì¤‘ ë°œê²¬í•œ ì´ìŠˆ ì œê¸°
- ëª¨ë¥´ëŠ” ë¬¸ë²•ì€ ì›¹ ê²€ìƒ‰ í›„ ì‹œë„

**í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜ˆì‹œ**:
```python
# tests/test_game_service.py
def test_guess_higher_than_answer():
    # Given: ì •ë‹µì´ 50ì¸ ê²Œì„
    game = Game(answer=50, attempts=0, max_attempts=10)
    service = GameService()

    # When: 70ì„ ì¶”ì¸¡
    result = service.make_guess(game, 70)

    # Then: "Too High" ê²°ê³¼ ë°˜í™˜
    assert result.message == "Too High"
    assert result.game.attempts == 1
```

---

### Step 3: RED í™•ì¸

**ëª…ë ¹ì–´**:
```bash
pytest
```

**ê¸°ëŒ€ ê²°ê³¼**: í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•´ì•¼ í•©ë‹ˆë‹¤ (RED ìƒíƒœ).

```
FAILED tests/test_game_service.py::test_guess_higher_than_answer
```

ì´ê²ƒì´ ì •ìƒì…ë‹ˆë‹¤! ì´ì œ GREEN ë‹¨ê³„ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.

---

## Phase 2: GREEN - í…ŒìŠ¤íŠ¸ í†µê³¼ì‹œí‚¤ê¸°

### Step 4: ìµœì†Œ êµ¬í˜„ (Driver)

**ëª©ì **: í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œí‚¤ëŠ” ìµœì†Œí•œì˜ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

**ì—ì´ì „íŠ¸**: Driver
**íŒŒì¼**: `agent/sub-agent/driver.md`

**ì‚¬ìš© ëª…ë ¹ì–´**:
```
ë“œë¼ì´ë²„ê°€ ë˜ì–´ ì´ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œì¼œì¤˜
```

**Driverì˜ ì ‘ê·¼**:
- ìµœì†Œí•œì˜ ì½”ë“œë¡œ í…ŒìŠ¤íŠ¸ í†µê³¼
- ì™„ë²½í•œ êµ¬í˜„ë³´ë‹¤ ë¹ ë¥¸ í”¼ë“œë°± ìš°ì„ 
- ë¦¬íŒ©í† ë§ì€ ë‚˜ì¤‘ì— (ì§€ê¸ˆì€ GREENì— ì§‘ì¤‘)

**êµ¬í˜„ ì˜ˆì‹œ**:
```python
# app/game_service.py
class GameService:
    def make_guess(self, game: Game, guess: int) -> GuessResult:
        if guess > game.answer:
            new_game = replace(game, attempts=game.attempts + 1)
            return GuessResult(game=new_game, message="Too High")
        # TODO: ë‹¤ë¥¸ ì¼€ì´ìŠ¤ëŠ” ë‹¤ìŒ í…ŒìŠ¤íŠ¸ì—ì„œ ì¶”ê°€
```

---

### Step 5: GREEN í™•ì¸

**ëª…ë ¹ì–´**:
```bash
pytest
```

**ê¸°ëŒ€ ê²°ê³¼**: ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ (GREEN ìƒíƒœ).

```
PASSED tests/test_game_service.py::test_guess_higher_than_answer
```

ì„±ê³µ! ì´ì œ REFACTOR ë‹¨ê³„ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.

---

## Phase 3: REFACTOR - ì½”ë“œ ê°œì„ 

### Step 6: ì½”ë“œ ë¦¬ë·° (Reviewer)

**ëª©ì **: ì‘ì„±í•œ ì½”ë“œì˜ í’ˆì§ˆì„ ê²€í† í•˜ê³  ê°œì„ ì ì„ ì°¾ìŠµë‹ˆë‹¤.

**ì—ì´ì „íŠ¸**: Reviewer
**íŒŒì¼**: `agent/sub-agent/reviewer.md`

**ì‚¬ìš© ëª…ë ¹ì–´**:
```
ë¦¬ë·°ì–´ê°€ ë˜ì–´ ì´ ì½”ë“œë¥¼ ë¦¬ë·°í•˜ê³  ë¦¬íŒ©í† ë§ ì œì•ˆí•´ì¤˜
```

**Reviewerê°€ ê²€í† í•˜ëŠ” ê²ƒ**:
- ì½”ë“œ ìŠ¤ë©œ(Code Smell) ê°ì§€
- Python 3.13 ê³ ê¸‰ íŒ¨í„´ ì œì•ˆ
- ë¶ˆë³€ì„±(Immutability) ì¤€ìˆ˜ í™•ì¸
- íƒ€ì… íŒíŠ¸ ê°œì„ 
- íŒ¨í„´ ë§¤ì¹­ í™œìš© ê°€ëŠ¥ì„±

**ì˜ˆì‹œ ì‘ë‹µ**:
```
    ë°œê²¬ëœ ìŠ¤ë©œ:
    1. ì¡°ê±´ë¬¸ì´ if-elif-elseë¡œ í™•ì¥ë  ê°€ëŠ¥ì„±
    â†’ match-case íŒ¨í„´ìœ¼ë¡œ ê°œì„  ê°€ëŠ¥

    ê°œì„  ì œì•ˆ:
    ```python
    def make_guess(self, game: Game, guess: int) -> GuessResult:
        match guess:
            case g if g > game.answer:
                message = "Too High"
            case g if g < game.answer:
                message = "Too Low"
            case _:
                message = "Correct"

        new_game = replace(game, attempts=game.attempts + 1)
        return GuessResult(game=new_game, message=message)
    ```

    í•µì‹¬ ì´ì :
    - ì˜ë„ê°€ ëª…í™•í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°
    - Python 3.13 match-case íŒ¨í„´ í™œìš©
```

---

### Step 7: ë¦¬íŒ©í† ë§ ì ìš© (Driver)

**ì—ì´ì „íŠ¸**: Driver
**íŒŒì¼**: `agent/sub-agent/driver.md`

**ì‚¬ìš© ëª…ë ¹ì–´**:
```
ë“œë¼ì´ë²„ê°€ ë˜ì–´ ë¦¬ë·°ì–´ ì œì•ˆì„ ì ìš©í•´ì¤˜
```

**ì ìš© í›„ í…ŒìŠ¤íŠ¸**:
```bash
pytest
```

**ê¸°ëŒ€ ê²°ê³¼**: ë¦¬íŒ©í† ë§ í›„ì—ë„ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ (GREEN ìœ ì§€).

---

### Step 8: ë‹¤ìŒ ì‚¬ì´í´ ê³„íš (Navigator)

**ì—ì´ì „íŠ¸**: Navigator
**íŒŒì¼**: `agent/sub-agent/navigator.md`

**ì‚¬ìš© ëª…ë ¹ì–´**:
```
ë„¤ë¹„ê²Œì´í„°ê°€ ë˜ì–´ ë‹¤ìŒì— ë­˜ í•´ì•¼ í• ì§€ ì•Œë ¤ì¤˜
```

**Navigator ì‘ë‹µ ì˜ˆì‹œ**:
```
ì§€ê¸ˆê¹Œì§€ ì™„ë£Œí•œ ê²ƒ:
âœ… "Too High" ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ë° êµ¬í˜„
âœ… match-case íŒ¨í„´ìœ¼ë¡œ ë¦¬íŒ©í† ë§

ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ:
1. "Too Low" ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì‘ì„± (ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë‹ˆ í…ŒìŠ¤íŠ¸ë§Œ ì¶”ê°€)
2. "Correct" ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì‘ì„±
3. ì—£ì§€ ì¼€ì´ìŠ¤: ë²”ìœ„ ë²—ì–´ë‚œ ì…ë ¥ ì²˜ë¦¬

ì»¤ë°‹ ê¶Œì¥ ì‹œì :
í˜„ì¬ ì˜ë¯¸ ìˆëŠ” ë‹¨ìœ„ ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ ì»¤ë°‹í•˜ëŠ” ê²Œ ì¢‹ê² ìŠµë‹ˆë‹¤.
```

---

## TDD ì‚¬ì´í´ ìš”ì•½í‘œ

| Phase | Step | Agent | Purpose | Command Example |
|-------|------|-------|---------|-----------------|
| **RED** | 1 | Navigator | ì „ëµ ìˆ˜ë¦½ | `ë„¤ë¹„ê²Œì´í„°ê°€ ë˜ì–´ ë‹¤ìŒ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì œì•ˆí•´ì¤˜` |
| **RED** | 2 | Driver | í…ŒìŠ¤íŠ¸ ì‘ì„± | `ë“œë¼ì´ë²„ê°€ ë˜ì–´ ì´ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ì‘ì„±í•´ì¤˜` |
| **RED** | 3 | - | ì‹¤í–‰ í™•ì¸ | `pytest` (ì‹¤íŒ¨ í™•ì¸) |
| **GREEN** | 4 | Driver | ìµœì†Œ êµ¬í˜„ | `ë“œë¼ì´ë²„ê°€ ë˜ì–´ ì´ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œì¼œì¤˜` |
| **GREEN** | 5 | - | ì‹¤í–‰ í™•ì¸ | `pytest` (í†µê³¼ í™•ì¸) |
| **REFACTOR** | 6 | Reviewer | ì½”ë“œ ë¦¬ë·° | `ë¦¬ë·°ì–´ê°€ ë˜ì–´ ì´ ì½”ë“œë¥¼ ë¦¬ë·°í•´ì¤˜` |
| **REFACTOR** | 7 | Driver | ë¦¬íŒ©í† ë§ ì ìš© | `ë“œë¼ì´ë²„ê°€ ë˜ì–´ ë¦¬ë·°ì–´ ì œì•ˆì„ ì ìš©í•´ì¤˜` |
| **REFACTOR** | 8 | Navigator | ë‹¤ìŒ ê³„íš | `ë„¤ë¹„ê²Œì´í„°ê°€ ë˜ì–´ ë‹¤ìŒì— ë­˜ í•´ì•¼ í• ì§€ ì•Œë ¤ì¤˜` |

---

## ë§‰í˜”ì„ ë•Œ - Coach í˜¸ì¶œ

**ì—ì´ì „íŠ¸**: Pair Coding Coach
**íŒŒì¼**: `agent/sub-agent/paircoding-coach.md`

**ì‚¬ìš© ì‹œì **:
- ì—­í• ì´ í—·ê°ˆë¦´ ë•Œ
- ì§„ì „ì´ ì—†ê³  ë§‰í ë•Œ
- ì—ì´ì „íŠ¸ ì „í™˜ì´ í•„ìš”í•  ë•Œ
- ë¬´ê¸°ë ¥í•œ íŒ¨í„´ì´ ë°˜ë³µë  ë•Œ

**ì‚¬ìš© ëª…ë ¹ì–´**:
```
ì½”ì¹˜ê°€ ë˜ì–´ ì§€ê¸ˆ ìƒí™©ì—ì„œ ë­˜ í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´
```

**Coachì˜ ì—­í• **:
- ì—­í•  ì „í™˜ ì¤‘ì¬ ë° ì•ˆë‚´
- WHAT(ì „ëµ) vs HOW(êµ¬í˜„) êµ¬ë¶„ êµìœ¡
- ë¹„ìƒì‚°ì  íŒ¨í„´ ê°ì§€ ë° ê°œì…
- êµ¬ì²´ì  ì˜ˆì‹œ ì œê³µ

---

## ì»¤ë°‹ ê¶Œì¥ ì‹œì 

TDD ì‚¬ì´í´ì—ì„œ ì»¤ë°‹í•˜ê¸° ì¢‹ì€ íƒ€ì´ë°:

1. **ê° TDD ì‚¬ì´í´ ì™„ë£Œ í›„** (RED-GREEN-REFACTOR)
2. **Navigatorê°€ ì»¤ë°‹ì„ ê¶Œì¥í•  ë•Œ**
3. **ì˜ë¯¸ ìˆëŠ” ë‹¨ìœ„ ì‘ì—… ì™„ë£Œ ì‹œ**
4. **ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼(GREEN) ìƒíƒœì¼ ë•Œ**

**ì»¤ë°‹ ëª…ë ¹ì–´**:
```bash
git add .
git commit -m "feat: implement guess comparison logic

- Add test for 'Too High' case
- Implement make_guess with match-case pattern
- Refactor to use Python 3.13 pattern matching

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>"
```

---

## ì¶”ê°€ ì°¸ê³  ìë£Œ

- **ì—ì´ì „íŠ¸ ìƒì„¸ ì •ë³´**: `AGENTS.md`
- **Clean Architecture ê°€ì´ë“œ**: `hidden-number/docs/architecture.md`
- **ë””ë ‰í† ë¦¬ êµ¬ì¡°**: `docs/directory-structure.md`
- **ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤**: `docs/scenario-examples.md`
